import '../styles/app.scss';
import './bootstrap3-typeahead.min.js';

// Enable Bootstrap tooltips
$(function () {
  $('.ctrl-set-models .custom-control-label').tooltip({
        delay: { "show": 500, "hide": 100 },
        html: true
    });
});

// Update stat counter for each set when option selected
function updateStats(set) {
    var available = set.find('.custom-control:not(.disabled) .custom-control-input').length;
    var selected = set.find('.custom-control-input:checked:visible').length;
    set.find('.ctrl-set-stats').text('('+selected+'/'+available+' Selected)');
}

// Deselect all checkboxes in set
$('.ctrl-set-clear').click(function(e){
    e.preventDefault();
    var set = $(this).closest('.ctrl-set');
    set.find('.custom-control-input').prop('checked', false);
    updateStats(set);
    if ( set.hasClass('ctrl-set-prules') ) {
        $('.ctrl-set-models .custom-control').removeClass('disabled').find('input').attr('disabled',false);;
        updateStats( $('.ctrl-set-models') );
    }
});

// Highcharts configuration
var Highcharts = require('highcharts');

// Load module after Highcharts is loaded
require('highcharts/modules/exporting')(Highcharts);

// Set HighCharts global options
Highcharts.setOptions({
    chart: {
        type: 'spline'
    },
    title: {
        text: 'Main title'
    },
    subtitle: {
        text: ''
    },
    yAxis: {
        title: {
            text: 'output'
        }
    },
    legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'middle'
    },
    plotOptions: {
        series: {
            marker: {
                enabled: false
            }
        }
    },
    responsive: {
        rules: [{
            condition: {
                maxWidth: 500
            },
            chartOptions: {
                legend: {
                    layout: 'horizontal',
                    align: 'center',
                    verticalAlign: 'bottom'
                },
                plotOptions: {
                    bullet: {
                        visible: false
                    }
                }
            }
        }]
    }
});



//// Temporary functions demonstrating prototype functionality

// Run stats function on selecting checkbox
$('.custom-control-input').change(function(e){
    updateStats( $(this).closest('.ctrl-set') );
});

// Randomly hides/shows models when selecting/deselecting policy rules
$('.ctrl-set-prules .custom-control-input').change(function(e){
    
    var checked = $(this).prop( "checked" );

    for (var i = 0; i < 20; i++) { 
        if ( checked ) {
            var models = $('.ctrl-set-models .custom-control:not(.disabled)');
            var randomModel = $(models[ Math.floor(Math.random() * (models.length - 1 + 1)) + 1 ]);
            randomModel.addClass('disabled').find('input').prop('checked',false).attr('disabled',true);
            randomModel.parent().append(randomModel);
            randomModel.find('label').tooltip('disable');
            randomModel.tooltip({
                title: 'Model unavailable with selected Policy Rules',
                delay: { "show": 500, "hide": 100 }
            });
        } else {
            var models = $('.ctrl-set-models .custom-control.disabled');
            var randomModel = $(models[ Math.floor(Math.random() * (models.length - 1 + 1)) + 1 ]);
            randomModel.removeClass('disabled').find('input').attr('disabled',false);
            randomModel.parent().prepend(randomModel);
            randomModel.tooltip('dispose');
            randomModel.find('label').tooltip('enable');
        }
    }

    updateStats( $('.ctrl-set-models') );

});

// Switch between controls and comparisons

$('#compareButton').click(function(e){
  e.preventDefault();
  $('#comparisons').fadeIn( "slow", "linear" );
    $('html, body').animate({
        scrollTop: $("#comparisons").offset().top
    }, 2000);
});

// Typeahead 

$.get("data.json", function(data){
  $(".typeahead").typeahead({ 
    source:data 
  });
},'json');


// Create HighChart objects

var chart1 = new Highcharts.Chart({
    chart: {
        renderTo: 'chart1'
    },
    series: [{
        name: 'NK_RW97',
        data: [0, -1.078973731, -0.848041312, -0.666535288, -0.523876943, -0.41175172, -0.323624625, -0.254359345, -0.199918892, -0.157130312, -0.123499759, -0.097067143, -0.076291892, -0.059963162, -0.047129265, -0.037042202]
    }, {
        name: 'NK_LWW03',
        data: [0, -1.081659433, -0.852131521, -0.671309384, -0.528857669, -0.416634179, -0.32822449, -0.25857532, -0.203705689, -0.160479383, -0.126425691, -0.099598185, -0.07846347, -0.061813538, -0.048696717, -0.038363284]
    }, {
        name: 'US_CMR14',
        data: [0, -0.133600836, -0.210253155, -0.251222356, -0.270391574, -0.276672195, -0.275672624, -0.270835715, -0.26420619, -0.256943005, -0.249657322, -0.24263227, -0.235963357, -0.229646206, -0.223629781, -0.217847376]
    }, {
        name: 'US_FRB08',
        data: [0, 0.002258475, -0.062073458, -0.148265556, -0.226578913, -0.273776468, -0.293143241, -0.285389454, -0.257707118, -0.221559421, -0.18374113, -0.149506127, -0.120849271, -0.097201103, -0.077355233, -0.059851169]
    }, {
        name: 'EA_SW03',
        data: [1, 0.905645143, 0.724521828, 0.516155576, 0.329095585, 0.225769369, 0.164143021, 0.124251259, 0.096451959, 0.075954069, 0.060265391, 0.047999794, 0.03831764, 0.030661414, 0.024629179, 0.019912579]
    }, {
        name: 'G7_TAY93',
        data: [1, 0.94293175, 0.826730808, 0.685628975, 0.549895929, 0.459264891, 0.394465906, 0.346305719, 0.309132709, 0.27765889, 0.250478734, 0.226622527, 0.205468826, 0.186677715, 0.169975556, 0.155137866]
    }]
});

var chart2 = new Highcharts.Chart({
    chart: {
        renderTo: 'chart2'
    },
    series: [{
        name: 'NK_RW97',
        data: [0, -1.078973731, -0.848041312, -0.666535288, -0.523876943, -0.41175172, -0.323624625, -0.254359345, -0.199918892, -0.157130312, -0.123499759, -0.097067143, -0.076291892, -0.059963162, -0.047129265, -0.037042202]
    }, {
        name: 'NK_LWW03',
        data: [0, -1.081659433, -0.852131521, -0.671309384, -0.528857669, -0.416634179, -0.32822449, -0.25857532, -0.203705689, -0.160479383, -0.126425691, -0.099598185, -0.07846347, -0.061813538, -0.048696717, -0.038363284]
    }, {
        name: 'US_CMR14',
        data: [0, -0.133600836, -0.210253155, -0.251222356, -0.270391574, -0.276672195, -0.275672624, -0.270835715, -0.26420619, -0.256943005, -0.249657322, -0.24263227, -0.235963357, -0.229646206, -0.223629781, -0.217847376]
    }, {
        name: 'US_FRB08',
        data: [0, 0.002258475, -0.062073458, -0.148265556, -0.226578913, -0.273776468, -0.293143241, -0.285389454, -0.257707118, -0.221559421, -0.18374113, -0.149506127, -0.120849271, -0.097201103, -0.077355233, -0.059851169]
    }, {
        name: 'EA_SW03',
        data: [1, 0.905645143, 0.724521828, 0.516155576, 0.329095585, 0.225769369, 0.164143021, 0.124251259, 0.096451959, 0.075954069, 0.060265391, 0.047999794, 0.03831764, 0.030661414, 0.024629179, 0.019912579]
    }, {
        name: 'G7_TAY93',
        data: [1, 0.94293175, 0.826730808, 0.685628975, 0.549895929, 0.459264891, 0.394465906, 0.346305719, 0.309132709, 0.27765889, 0.250478734, 0.226622527, 0.205468826, 0.186677715, 0.169975556, 0.155137866]
    }]
});

var chart3 = new Highcharts.Chart({
    chart: {
        renderTo: 'chart3'
    },
    series: [{
        name: 'NK_RW97',
        data: [0, -1.078973731, -0.848041312, -0.666535288, -0.523876943, -0.41175172, -0.323624625, -0.254359345, -0.199918892, -0.157130312, -0.123499759, -0.097067143, -0.076291892, -0.059963162, -0.047129265, -0.037042202]
    }, {
        name: 'NK_LWW03',
        data: [0, -1.081659433, -0.852131521, -0.671309384, -0.528857669, -0.416634179, -0.32822449, -0.25857532, -0.203705689, -0.160479383, -0.126425691, -0.099598185, -0.07846347, -0.061813538, -0.048696717, -0.038363284]
    }, {
        name: 'US_CMR14',
        data: [0, -0.133600836, -0.210253155, -0.251222356, -0.270391574, -0.276672195, -0.275672624, -0.270835715, -0.26420619, -0.256943005, -0.249657322, -0.24263227, -0.235963357, -0.229646206, -0.223629781, -0.217847376]
    }, {
        name: 'US_FRB08',
        data: [0, 0.002258475, -0.062073458, -0.148265556, -0.226578913, -0.273776468, -0.293143241, -0.285389454, -0.257707118, -0.221559421, -0.18374113, -0.149506127, -0.120849271, -0.097201103, -0.077355233, -0.059851169]
    }, {
        name: 'EA_SW03',
        data: [1, 0.905645143, 0.724521828, 0.516155576, 0.329095585, 0.225769369, 0.164143021, 0.124251259, 0.096451959, 0.075954069, 0.060265391, 0.047999794, 0.03831764, 0.030661414, 0.024629179, 0.019912579]
    }, {
        name: 'G7_TAY93',
        data: [1, 0.94293175, 0.826730808, 0.685628975, 0.549895929, 0.459264891, 0.394465906, 0.346305719, 0.309132709, 0.27765889, 0.250478734, 0.226622527, 0.205468826, 0.186677715, 0.169975556, 0.155137866]
    }]
});

var chart4 = new Highcharts.Chart({
    chart: {
        renderTo: 'chart4'
    },
    series: [{
        name: 'NK_RW97',
        data: [0, -1.078973731, -0.848041312, -0.666535288, -0.523876943, -0.41175172, -0.323624625, -0.254359345, -0.199918892, -0.157130312, -0.123499759, -0.097067143, -0.076291892, -0.059963162, -0.047129265, -0.037042202]
    }, {
        name: 'NK_LWW03',
        data: [0, -1.081659433, -0.852131521, -0.671309384, -0.528857669, -0.416634179, -0.32822449, -0.25857532, -0.203705689, -0.160479383, -0.126425691, -0.099598185, -0.07846347, -0.061813538, -0.048696717, -0.038363284]
    }, {
        name: 'US_CMR14',
        data: [0, -0.133600836, -0.210253155, -0.251222356, -0.270391574, -0.276672195, -0.275672624, -0.270835715, -0.26420619, -0.256943005, -0.249657322, -0.24263227, -0.235963357, -0.229646206, -0.223629781, -0.217847376]
    }, {
        name: 'US_FRB08',
        data: [0, 0.002258475, -0.062073458, -0.148265556, -0.226578913, -0.273776468, -0.293143241, -0.285389454, -0.257707118, -0.221559421, -0.18374113, -0.149506127, -0.120849271, -0.097201103, -0.077355233, -0.059851169]
    }, {
        name: 'EA_SW03',
        data: [1, 0.905645143, 0.724521828, 0.516155576, 0.329095585, 0.225769369, 0.164143021, 0.124251259, 0.096451959, 0.075954069, 0.060265391, 0.047999794, 0.03831764, 0.030661414, 0.024629179, 0.019912579]
    }, {
        name: 'G7_TAY93',
        data: [1, 0.94293175, 0.826730808, 0.685628975, 0.549895929, 0.459264891, 0.394465906, 0.346305719, 0.309132709, 0.27765889, 0.250478734, 0.226622527, 0.205468826, 0.186677715, 0.169975556, 0.155137866]
    }]
});

var chart5 = new Highcharts.Chart({
    chart: {
        renderTo: 'chart5'
    },
    series: [{
        name: 'NK_RW97',
        data: [0, -1.078973731, -0.848041312, -0.666535288, -0.523876943, -0.41175172, -0.323624625, -0.254359345, -0.199918892, -0.157130312, -0.123499759, -0.097067143, -0.076291892, -0.059963162, -0.047129265, -0.037042202]
    }, {
        name: 'NK_LWW03',
        data: [0, -1.081659433, -0.852131521, -0.671309384, -0.528857669, -0.416634179, -0.32822449, -0.25857532, -0.203705689, -0.160479383, -0.126425691, -0.099598185, -0.07846347, -0.061813538, -0.048696717, -0.038363284]
    }, {
        name: 'US_CMR14',
        data: [0, -0.133600836, -0.210253155, -0.251222356, -0.270391574, -0.276672195, -0.275672624, -0.270835715, -0.26420619, -0.256943005, -0.249657322, -0.24263227, -0.235963357, -0.229646206, -0.223629781, -0.217847376]
    }, {
        name: 'US_FRB08',
        data: [0, 0.002258475, -0.062073458, -0.148265556, -0.226578913, -0.273776468, -0.293143241, -0.285389454, -0.257707118, -0.221559421, -0.18374113, -0.149506127, -0.120849271, -0.097201103, -0.077355233, -0.059851169]
    }, {
        name: 'EA_SW03',
        data: [1, 0.905645143, 0.724521828, 0.516155576, 0.329095585, 0.225769369, 0.164143021, 0.124251259, 0.096451959, 0.075954069, 0.060265391, 0.047999794, 0.03831764, 0.030661414, 0.024629179, 0.019912579]
    }, {
        name: 'G7_TAY93',
        data: [1, 0.94293175, 0.826730808, 0.685628975, 0.549895929, 0.459264891, 0.394465906, 0.346305719, 0.309132709, 0.27765889, 0.250478734, 0.226622527, 0.205468826, 0.186677715, 0.169975556, 0.155137866]
    }]
});

var chart6 = new Highcharts.Chart({
    chart: {
        renderTo: 'chart6'
    },
    series: [{
        name: 'NK_RW97',
        data: [0, -1.078973731, -0.848041312, -0.666535288, -0.523876943, -0.41175172, -0.323624625, -0.254359345, -0.199918892, -0.157130312, -0.123499759, -0.097067143, -0.076291892, -0.059963162, -0.047129265, -0.037042202]
    }, {
        name: 'NK_LWW03',
        data: [0, -1.081659433, -0.852131521, -0.671309384, -0.528857669, -0.416634179, -0.32822449, -0.25857532, -0.203705689, -0.160479383, -0.126425691, -0.099598185, -0.07846347, -0.061813538, -0.048696717, -0.038363284]
    }, {
        name: 'US_CMR14',
        data: [0, -0.133600836, -0.210253155, -0.251222356, -0.270391574, -0.276672195, -0.275672624, -0.270835715, -0.26420619, -0.256943005, -0.249657322, -0.24263227, -0.235963357, -0.229646206, -0.223629781, -0.217847376]
    }, {
        name: 'US_FRB08',
        data: [0, 0.002258475, -0.062073458, -0.148265556, -0.226578913, -0.273776468, -0.293143241, -0.285389454, -0.257707118, -0.221559421, -0.18374113, -0.149506127, -0.120849271, -0.097201103, -0.077355233, -0.059851169]
    }, {
        name: 'EA_SW03',
        data: [1, 0.905645143, 0.724521828, 0.516155576, 0.329095585, 0.225769369, 0.164143021, 0.124251259, 0.096451959, 0.075954069, 0.060265391, 0.047999794, 0.03831764, 0.030661414, 0.024629179, 0.019912579]
    }, {
        name: 'G7_TAY93',
        data: [1, 0.94293175, 0.826730808, 0.685628975, 0.549895929, 0.459264891, 0.394465906, 0.346305719, 0.309132709, 0.27765889, 0.250478734, 0.226622527, 0.205468826, 0.186677715, 0.169975556, 0.155137866]
    }]
});